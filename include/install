#!/bin/bash

# By Rainman
# V20211712
# 0.0.3.2

source /home/pi/pitrump.conf

# dependencies

# make sure screen is installed
if ! [ -x "$(command -v screen)" ]; then
  sudo apt-get install screen -y
fi
# make sure tor is installed
if ! [ -x "$(command -v tor)" ]; then
  sudo apt-get install tor -y
  echo "Setup tor/wallet configurations!"
fi

# install/update
clear
sudo cp -R /home/"$(whoami)"/trump-node/include/* /usr/local/bin/include/ 2>&1
sudo cp -R /home/"$(whoami)"/trump-node/pitrump /usr/local/bin/ 2>&1
sudo cp -R /home/"$(whoami)"/trump-node/include/update /usr/local/bin/ 2>&1
sudo chmod +x /usr/local/bin/update
sudo chown -R "$(whoami)":"$(whoami)" /usr/local/bin/pitrump /usr/local/bin/update /usr/local/bin/include /usr/local/bin/include/* 2>&1
sudo chown "$(whoami)":"$(whoami)" "${LOG_DIR:?}"/node_data 2>&1
echo "Updated!"
ls -lS /usr/local/bin/include/

# END
